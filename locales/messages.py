# ÙÙ‚Ø· Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ 'Ù…Ø­ØµÙˆÙ„' Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯ (Ù†Ù‡ Ù¾Ù„Ù†)
from typing import Dict

TEXTS: Dict[str, Dict[str, str]] = {
    "fa": {
        "welcome": "Ø³Ù„Ø§Ù… {name}! Ø¨Ù‡ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¯ÛŒØ¬ÛŒØªØ§Ù„ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯.",
        "help": "Ø¯Ø³ØªÙˆØ±Ø§Øª:\n/store â€” Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø­ØµÙˆÙ„Ø§Øª\n/orders â€” Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ù†\n/help â€” Ø±Ø§Ù‡Ù†Ù…Ø§",
        "only_admin": "Ø§ÛŒÙ† Ø¨Ø®Ø´ Ù…Ø®ØµÙˆØµ Ø§Ø¯Ù…ÛŒÙ†â€ŒÙ‡Ø§Ø³Øª.",
        "banned": "Ø¯Ø³ØªØ±Ø³ÛŒ Ø´Ù…Ø§ Ù…Ø­Ø¯ÙˆØ¯ Ø´Ø¯Ù‡ Ø§Ø³Øª.",
        "store_empty": "ÙØ¹Ù„Ø§Ù‹ Ù…Ø­ØµÙˆÙ„ÛŒ ÙØ¹Ø§Ù„ Ù†ÛŒØ³Øª.",
        "product_price": "Ù‚ÛŒÙ…Øª: {price} {currency}",
        "buy": "Ø®Ø±ÛŒØ¯ ðŸ›’",
        "back": "Ø¨Ø§Ø²Ú¯Ø´Øª â¬…ï¸",
        "order_created": "Ø³ÙØ§Ø±Ø´ Ø´Ù…Ø§ Ø«Ø¨Øª Ø´Ø¯. Ú©Ø¯ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ: {code}",
        "invoice_sent": "ÙØ§Ú©ØªÙˆØ± Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯. Ù„Ø·ÙØ§Ù‹ Ù¾Ø±Ø¯Ø§Ø®Øª Ø±Ø§ ØªÚ©Ù…ÛŒÙ„ Ú©Ù†ÛŒØ¯.",
        "paid": "Ù¾Ø±Ø¯Ø§Ø®Øª Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯ âœ…",
        "delivered": "ØªØ­ÙˆÛŒÙ„ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯ âœ…",
        "no_license": "ÙØ¹Ù„Ø§Ù‹ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ù„Ø§ÛŒØ³Ù†Ø³ Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„ ØªÙ…Ø§Ù… Ø§Ø³Øª. Ù„Ø·ÙØ§Ù‹ Ø¨Ø¹Ø¯Ø§Ù‹ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.",
        "orders_title": "Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§:",
        "admin_dashboard": "Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§Ø¯Ù…ÛŒÙ† â€” Ú©Ø§Ø±Ø¨Ø±Ø§Ù†: {uc} | Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§: {oc} | Ø¯Ø±Ø¢Ù…Ø¯: {rev} {cur}",
        "admin_orders": "Ù…Ø¯ÛŒØ±ÛŒØª Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§",
        "admin_products": "Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø­ØµÙˆÙ„Ø§Øª",
        "admin_settings": "ØªÙ†Ø¸ÛŒÙ…Ø§Øª",
        "admin_back": "Ø¨Ø§Ø²Ú¯Ø´Øª",
        "admin_order_line": "#{code} â€” {status} â€” {amount}{currency}",
        "admin_order_detail": "Ø³ÙØ§Ø±Ø´ #{code}\nÙˆØ¶Ø¹ÛŒØª: {status}\nÙ…Ø¨Ù„Øº: {amount} {currency}\nØ§ÛŒØ¬Ø§Ø¯: {created}\nÙ¾Ø±Ø¯Ø§Ø®Øª: {paid}\nØªØ­ÙˆÛŒÙ„: {delivered}\nÚ©Ø§Ø±Ø¨Ø±: {uid}",
        "admin_set_status": "ØªØºÛŒÛŒØ± ÙˆØ¶Ø¹ÛŒØª",
        "admin_mark_paid": "Ù¾Ø±Ø¯Ø§Ø®Øª Ø´Ø¯",
        "admin_mark_processing": "Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø±Ø¯Ø§Ø²Ø´",
        "admin_mark_delivered": "ØªØ­ÙˆÛŒÙ„ Ø´Ø¯",
        "admin_mark_canceled": "Ù„ØºÙˆ Ø´Ø¯",
        "admin_mark_refunded": "Ø¹ÙˆØ¯Øª Ø´Ø¯",
        "admin_products_list": "ÙÙ‡Ø±Ø³Øª Ù…Ø­ØµÙˆÙ„Ø§Øª (ÙØ¹Ø§Ù„):",
        "admin_add_product": "Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø­ØµÙˆÙ„ âž•",
        "admin_toggle": "ÙØ¹Ø§Ù„/ØºÛŒØ±ÙØ¹Ø§Ù„",
        "admin_edit": "ÙˆÛŒØ±Ø§ÛŒØ´",
        "admin_send_again": "Ø§Ø±Ø³Ø§Ù„ Ù…Ø¬Ø¯Ø¯ Ú©Ø§Ù„Ø§ Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±",
        "admin_added_ok": "Ù…Ø­ØµÙˆÙ„ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯ (#{pid}).",
        "admin_codes_added": "ØªØ¹Ø¯Ø§Ø¯ {n} Ú©Ø¯ Ù„Ø§ÛŒØ³Ù†Ø³ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯.",
        "admin_alert_new_order": "Ø³ÙØ§Ø±Ø´ Ø¬Ø¯ÛŒØ¯ #{code} Ø§Ø² Ú©Ø§Ø±Ø¨Ø± {uid}\nÙ…Ø­ØµÙˆÙ„: {title}\nÙ…Ø¨Ù„Øº: {amount} {currency}\nØ²Ù…Ø§Ù†: {ts}",
        "admin_alert_paid": "Ù¾Ø±Ø¯Ø§Ø®Øª Ø´Ø¯ âœ… â€” #{code} â€” Ú©Ø§Ø±Ø¨Ø± {uid} â€” Ù…Ø¨Ù„Øº {amount} {currency}",
        "unknown_cmd": "Ø¯Ø³ØªÙˆØ± Ù†Ø§Ù…Ø¹ØªØ¨Ø±. /help",
    },
    "en": {
        "welcome": "Welcome to the digital shop, {name}.",
        "help": "Commands:\n/store â€” browse products\n/orders â€” my orders\n/help â€” help",
        "only_admin": "Admins only.",
        "banned": "Access restricted.",
        "store_empty": "No active products yet.",
        "product_price": "Price: {price} {currency}",
        "buy": "Buy ðŸ›’",
        "back": "Back â¬…ï¸",
        "order_created": "Your order has been created. Tracking code: {code}",
        "invoice_sent": "Invoice sent. Please complete the payment.",
        "paid": "Payment successful âœ…",
        "delivered": "Delivered âœ…",
        "no_license": "This product is out of license stock for now.",
        "orders_title": "Your orders:",
        "admin_dashboard": "Admin Dashboard â€” Users: {uc} | Orders: {oc} | Revenue: {rev} {cur}",
        "admin_orders": "Orders",
        "admin_products": "Products",
        "admin_settings": "Settings",
        "admin_back": "Back",
        "admin_order_line": "#{code} â€” {status} â€” {amount}{currency}",
        "admin_order_detail": "Order #{code}\nStatus: {status}\nAmount: {amount} {currency}\nCreated: {created}\nPaid: {paid}\nDelivered: {delivered}\nUser: {uid}",
        "admin_set_status": "Set status",
        "admin_mark_paid": "Mark Paid",
        "admin_mark_processing": "Processing",
        "admin_mark_delivered": "Delivered",
        "admin_mark_canceled": "Canceled",
        "admin_mark_refunded": "Refunded",
        "admin_products_list": "Products (active):",
        "admin_add_product": "Add product âž•",
        "admin_toggle": "Toggle active",
        "admin_edit": "Edit",
        "admin_send_again": "Send goods again to user",
        "admin_added_ok": "Product created (#{pid}).",
        "admin_codes_added": "{n} license codes added.",
        "admin_alert_new_order": "New order #{code} from user {uid}\nProduct: {title}\nAmount: {amount} {currency}\nTime: {ts}",
        "admin_alert_paid": "Paid âœ… â€” #{code} â€” user {uid} â€” amount {amount} {currency}",
        "unknown_cmd": "Unknown command. /help",
    },
}

def t(lang: str, key: str, **kwargs) -> str:
    d = TEXTS.get(lang) or TEXTS.get("en", {})
    msg = d.get(key) or TEXTS.get("en", {}).get(key, key)
    try:
        return msg.format(**kwargs) if kwargs else msg
    except Exception:
        return msg
